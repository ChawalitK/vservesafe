(function(w){if(void 0!==w._tr)return;w._tr={test:!0},w._tr.endpoint="https://rec.thairath.co.th",w._tr.imp_widget=[];const id=function(e){return document.getElementById(e)};w._tr.id=id;const load=(e,t,n)=>{const r=`_tr-${n}`,o=id(r);if(!o){let n;"css"===t?(n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e)):"script"===t&&(n=document.createElement("script"),n.setAttribute("type","text/javascript"),n.setAttribute("src",e)),document.getElementsByTagName("head")[0].appendChild(n)}};w._tr.load=load;const get=(obj,path,def)=>{try{return"string"==typeof path&&"object"==typeof obj?eval(`obj.${path}`):def}catch(e){return def}};w._tr.get=get;const event=(e,t)=>{t.id=e,t.userInfo=clientInfo(),"true"!==w._tr.is_test&&load(w._tr.endpoint+`/articles/event?data=${JSON.stringify(t)}&ran=${Math.random()}`,"script",Math.random())};w._tr.event=event;const getThaiDate=e=>{const t=["มค.","กพ.","มีค.","เมย.","พค.","มิย.","กค.","สค.","กย.","ตค.","พย.","ธค."],n=new Date(e),r=n.getDate(),o=t[n.getMonth()],i=n.getFullYear()+543;return`${r} ${o} ${i}`};w._tr.getThaiDate=getThaiDate;const checkVisiblePercentage=(e,t=50)=>{const n=e.getBoundingClientRect(),r=100/t,o=n.top+n.height/r>0&&n.left+n.width/r>0&&n.top+n.height/r<(window.innerHeight||document.documentElement.clientHeight)&&n.left+n.width/r<(window.innerWidth||document.documentElement.clientWidth);return o};w._tr.checkVisiblePercentage=checkVisiblePercentage;const getUUID=()=>{if(!localStorage)return null;const e=localStorage.getItem("_tr-rec-uuid");if(e)return e;{const e=_genUUID();return localStorage.setItem("_tr-rec-uuid",e),e}};w._tr.getUUID=getUUID;const _genUUID=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)}),checkVisiblity=(e,t)=>{let n=[],r=null;const o=document.querySelectorAll("#tr-"+e+" ._tr-item-event"),i=()=>{clearTimeout(r),r=setTimeout(()=>{o.forEach((e,r)=>{checkVisiblePercentage(e,50)&&!1===n.includes(r)&&(n.push(r),t(r),n.length===o.length&&window.removeEventListener("scroll",i))})},100)};window.addEventListener("scroll",i)};w._tr.checkVisiblity=checkVisiblity;const userAgent=navigator.userAgent.toLowerCase(),getBrowserInfo=()=>{const e={name:"unknow",version:"unknow"};return-1!==userAgent.indexOf("firefox")?e.name="Mozilla Firefox":-1!==userAgent.indexOf("chrome")?e.name="Google Chrome":-1!==userAgent.indexOf("safari")?e.name="Apple Safari":-1!==userAgent.indexOf("opera")?e.name="Opera":-1!==userAgent.indexOf("trident")&&(e.name="Internet Explorer"),e},getOSInfo=()=>{const e={name:"unknow",version:"unknow"};return-1!==userAgent.indexOf("win")?e.name="Windows":-1!==userAgent.indexOf("mac")?e.name="MacOS":-1!==userAgent.indexOf("linux")?e.name="Linux":-1!==userAgent.indexOf("android")?e.name="Android":-1!==userAgent.indexOf("iphone")&&(e.name="iOS"),e},getDeviceInfo=()=>{const e={type:"unknow",brand:"unknow"};return-1!==userAgent.indexOf("mobile")?e.type="Mobile":-1!==userAgent.indexOf("tablet")?e.type="Tablet":e.type="Desktop",e.brand=getUserDeviceBrand(),e},getUserDeviceBrand=()=>{const e=["APPLE","SAMSUNG","HUAWEI","XIAOMI","LENOVO","HP","DELL","SONY","LG","GOOGLE","MICROSOFT","ASUS","ACER","OPPO","VIVO","ONEPLUS","MOTOROLA","NOKIA","HTC","PANASONIC"];for(const t of e)if(-1!==userAgent.indexOf(t.toLowerCase()))return t;return"Unknown"},clientInfo=()=>{let e="";e=w.location.href.indexOf("#")?w.location.href.split("#")[0]:w.location.href;const t={url:e,referrer:document.referrer,browser:getBrowserInfo(),os:getOSInfo(),device:getDeviceInfo(),uuid:getUUID()};return btoa(JSON.stringify(t))};w._tr.clientInfo=clientInfo;const setBehavior=()=>{const e=w.location.href,t=_getSection(e);if(t){const e=getBehavior(),n=e&&e[t]?++e[t]:1;setCookie("TRRec_Beh",{...e,[t]:n})}};w._tr.setBehavior=setBehavior;const getBehavior=()=>getCookie("TRRec_Beh");w._tr.getBehavior=getBehavior;const _getSection=e=>{let t=null;return e.match(/news\/business/)?t="bu":e.match(/entertain/)?t="en":e.match(/horoscope/)?t="ho":e.match(/lifestyle/)?t="li":e.match(/lottery/)?t="lo":e.match(/novel/)?t="no":e.match(/scoop/)?t="sc":e.match(/sport/)?t="sp":e.match(/news/)&&(t="ne"),t},setCookie=(e,t,n)=>{var r="";if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toUTCString()}document.cookie=e+"="+JSON.stringify(t||{})+r+"; path=/"};w._tr.setCookie=setCookie;const getCookie=e=>{for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t)){const e=o.substring(t.length,o.length);return JSON.parse(e)}}return null};w._tr.getCookie=getCookie;const getListTimeline=e=>{let t=[];const n=(new Date).getTime();for(let r=1;r<24;r+=2){const o=n-60*(r-2)*60*1e3,i=n-60*r*60*1e3;let s=[];for(let t=0;t<e.length;t++){const n=e[t],r=new Date(n.published_at)<=new Date(o).setMinutes(0)&&new Date(n.published_at)>new Date(i).setMinutes(0);r&&s.push(n)}const c=new Date(o).getHours(),a=new Date(i).getHours();let l=c<10?"0"+c+":00":c+":00",u="";1===r?(l=a<10?"0"+a+":00":a+":00",u="ล่าสุด"):u=a<10?"0"+a+":00":a+":00",t.push({id:c+"-"+a,text:l+" - "+u,hourText1:l,hourText2:u,items:s})}return t};w._tr.getListTimeline=getListTimeline,load(w._tr.endpoint+"/css/font.css","css","css-font"),load(w._tr.endpoint+"/css/global.css","css","global-css"),"undefined"==typeof ejs&&load(w._tr.endpoint+"/js/ejs.min.js","script","ejs"),setBehavior()})(window);